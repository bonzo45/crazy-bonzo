/* ------------------------------------------------------------------- */
/* -------------------------- Control Panel -------------------------- */
/* ------------------------------------------------------------------- */
$texture_path: "image/texture/"
$colour_path: "image/colours/"
$filter_path: "image/filter/"

$screen_width: 1280px
$sidebar_width: 100px

$height_of_sky: 60%
$height_of_ground: 100% - $height_of_sky
$height_of_hill: 50px

$height_of_beach: 50px

$height_of_mountain: 600px
$width_of_mountain: $screen_width / 2

$author_width: $screen_width / 2
$author_height: 100pt
$author_left: $width_of_mountain - 50px
$author_top: 100px

/* ------------------------------------------------------------------- */
/* ------------------------------- Util ------------------------------ */
/* ------------------------------------------------------------------- */

$layer_1: 1
$layer_2: 2
$layer_3: 3
$layer_4: 4
$layer_5: 5
$layer_6: 6

/* ---- Absolute Positioning ---- */
@mixin absolute_object($top, $left, $width, $height, $z-index: $layer_1)
  position: absolute
  top: $top
  left: $left
  width: $width
  height: $height
  z-index: $z-index

@mixin absolute_object_b($bottom, $left, $width, $height, $z-index: $layer_1)
  position: absolute
  bottom: $bottom
  left: $left
  width: $width
  height: $height
  z-index: $z-index

/* ---- Animation ---- */
@mixin generateKeyframes($animationName, $properties, $points, $back)
  $postfix: ""  
  $timepoints: length($points) - 1
  $increment: 100% / $timepoints
  @if $back
    $postfix: "Open"
  @-webkit-keyframes #{$animationName}#{$postfix}
    @for $j from 1 to length($points) + 1
      #{($j - 1) * $increment}
        @for $i from 1 to length($properties) + 1
          #{nth($properties, $i)}: nth(nth($points, $j), $i)
      
  @keyframes #{$animationName}#{$postfix}
    @for $j from 1 to length($points) + 1
      #{($j - 1) * $increment}
        @for $i from 1 to length($properties) + 1
          #{nth($properties, $i)}: nth(nth($points, $j), $i)

@mixin animate($animationName, $time, $repeat)
  $times: ""
  @if $repeat == forwards
    $times: 1
  -webkit-animation: $animationName $time linear #{$times} $repeat
  animation: $animationName $time linear #{$times} $repeat

body
  margin: 0px 0px 0px 0px

/* ------------------------------------------------------------------- */
/* ------------------------------ Sidebar ---------------------------- */
/* ------------------------------------------------------------------- */
#sidebar
  position: fixed
  right: 0px
  height: 100%
  width: 0px
  background:
    color: white

  z-index: 2
  opacity: 0.5

.sidebar_closed
  @include animate("closeSidebar", 200, forwards)
  width: 100px !important

.sidebar_open
  @include animate("openSidebar", 200, forwards)
  width: 0px !important

@include generateKeyframes("closeSidebar", (width), ((100, 0)), false)
@include generateKeyframes("openSidebar", (width), ((0, 100)), false)

#tab
  position: relative
  width: 50px
  height: 50px
  top: 50px
  left: -50px
  background-color: black
  text-align: center
  color: white
  font-size: 20pt

#tab_icon
  line-height: 50px
    
#sidebar_content
  position: relative
  height: 100%
  width: 100%

/* ------------------------------------------------------------------- */
/* ---------------------------- Centerer ----------------------------- */
/* ------------------------------------------------------------------- */

.centerer
  position: relative
  margin: 0 auto
  width: $screen_width
  height: 100%

/* ------------------------------------------------------------------- */
/* ------------------------------- Sky ------------------------------- */
/* ------------------------------------------------------------------- */

/* ---- Sky ---- */
$texture_sky: $colour_path + "light_blue.png"
$texture_sky_size: 300px

#sky
  width: 100%
  height: $height_of_sky
  position: relative
  background:
    image: url(#{$texture_sky})
    size: $texture_sky_size $texture_sky_size

  min:
    height: $height_of_mountain

  z-index: 1

$texture_sky_tint: $filter_path + "tint.png"
$sky_tint_width: 400px
$sky_tint_height: 100%

#sky_tint
  width: 100%
  height: 100%
  background:
    image: url(#{$texture_sky_tint})
    size: $sky_tint_width $sky_tint_height
  opacity: 1.0

/* ---- Clouds ---- */
$texture_cloud: $texture_path + "Cloud"

@mixin cloud($id, $top, $left, $time)
  @include absolute_object($left, auto, 100px, 100px, $layer_2)
  @include animate(cloud#{$id}, $time, infinite)
  background:
    image: url(#{$texture_cloud}/Cloud_#{$id}.png)
    size: 100% 100%
    repeat: no-repeat

#cloud1
  @include cloud(1, 50px, 50px, 50s)

@include generateKeyframes(cloud1, (right, opacity), ((10%, 0.0), (40%, 1.0), (70%, 1.0), (100%, 0.0)), false)

#cloud2
  @include cloud(2, 700px, 50px, 58s)

@include generateKeyframes(cloud2, (right, opacity), ((10%, 0.0), (10%, 0.0), (40%, 1.0), (70%, 1.0), (100%, 0.0)), false)

#cloud3
  @include cloud(3, 1000px, 100px, 66s)

@include generateKeyframes(cloud3, (right, opacity), ((10%, 0.0), (10%, 0.0), (10%, 0.0), (40%, 1.0), (70%, 1.0), (100%, 0.0)), false)

#cloud4
  @include cloud(4, 1200px, 20px, 74s)

@include generateKeyframes(cloud4, (right, opacity), ((10%, 0.0), (10%, 0.0), (10%, 0.0), (10%, 0.0), (40%, 1.0), (70%, 1.0), (100%, 0.0)), false)

#cloud5
  @include cloud(5, 1500px, 200px, 82s)

@include generateKeyframes(cloud5, (right, opacity), ((10%, 0.0), (10%, 0.0), (10%, 0.0), (10%, 0.0), (10%, 0.0), (40%, 1.0), (70%, 1.0), (100%, 0.0)), false)

#cloud6
  @include cloud(6, 1750px, 50px, 90s)

@include generateKeyframes(cloud6, (right, opacity), ((10%, 0.0), (10%, 0.0), (10%, 0.0), (10%, 0.0), (10%, 0.0), (10%, 0.0), (40%, 1.0), (70%, 1.0), (100%, 0.0)), false)

/* ---- Birds ---- */
$texture_birds: $texture_path + "Birds.png"
$birds_width: 150px
$birds_height: 50px

#birds
  @include absolute_object(-$birds_height, $author_width - $birds_width, $birds_width, $birds_height)
  background:
    image: url(#{$texture_birds})
    size: 100% 100%
    repeat: no-repeat

/* ---- Sam Esgate ---- */
$samesgate_color: #DCDCDC
$samesgate_height: $author_height

#author
  @include absolute_object($author_top, $author_left, $author_width, $author_height, $layer_3)
  font:
    family: helvetica

$samesgate_border: 10px

#samesgate
  @include absolute_object(0px, 0px, 100%, $samesgate_height, $layer_1)
  line:
    height: $samesgate_height
  font:
    size: 72pt
  text:
    align: center
  border:
    top: ($samesgate_border / 2) solid $samesgate_color
    bottom: ($samesgate_border / 2) solid $samesgate_color
  color: $samesgate_color

$useful_height: 50px
$useful_margin: 5px

$bonzos_wrapper_width: $author_width
$bonzos_wrapper_height: auto
$bonzos_wrapper_left: $author_left + (($author_width - $bonzos_wrapper_width) / 2)
$bonzos_wrapper_top: $author_top + $author_height + $samesgate_border

#bonzos_useful_things
  @include absolute_object($bonzos_wrapper_top, $bonzos_wrapper_left, $bonzos_wrapper_width - 2 * $useful_margin, $bonzos_wrapper_height, $layer_4)

  background:
    color: #2D2222

  padding: $useful_margin

  border:
    radius: 0px 0px 5px 5px
  
  text-align: center

$icon_margin: 5px
$useful_icon_size: $useful_height - 2 * $icon_margin

.useful_icon
  display: inline-block
  width: $useful_icon_size
  height: $useful_icon_size
  margin: $icon_margin

$separator_width: 5px

.separator
  display: inline-block
  width: $separator_width
  height: $useful_height

$countdown_width: 75px
$countdown_height: 75px

/* ---- Clock ---- */
$clock_height: 300px
$clock_width: $clock_height / 2
$clock_top: $useful_height
$clock_left: $bonzos_wrapper_width - $clock_width / 2
$texture_clock: $texture_path + "Clock.png"

#clock
  @include absolute_object($clock_top, $clock_left, $clock_width, $clock_height)
  background:
    image: url(#{$texture_clock})
    size: $clock_width $clock_height
  @include animate(clockSwing, 4s, infinite)

@include generateKeyframes(clockSwing,(transform, -webkit-transform), ((rotate(-1deg), rotate(-1deg)), (rotate(1deg), rotate(1deg)), (rotate(-1deg), rotate(-1deg))), false)

/* ---- Mountain --- */
$mountain_height: 100%
$mountain_width: $width_of_mountain
$texture_mountain: $texture_path + "Mountain.png"
$texture_mountain_width: $width_of_mountain
$texture_mountain_height: $height_of_mountain

#mountain
  @include absolute_object_b(0px, 0px, $mountain_width, $mountain_height, $layer_3)
  background:
    image: url(#{$texture_mountain})
    repeat: no-repeat
    position: bottom 0px left 0px
    size: $texture_mountain_width $texture_mountain_height
  min:
    width: $texture_mountain_width
    height: $texture_mountain_height

/* ---- Hill ---- */
$texture_hill: $colour_path + "dark_green.png"

#hill
  @include absolute_object_b(0px, 0px, 100%, $height_of_hill, $layer_1)
  background:
    image: url(#{$texture_hill})

/* ---- Armco ---- */
$armco_height: 25px
$texture_armco: $texture_path + "Armco.png"
$texture_armco_height: 100%
$texture_armco_width: 425px

#armco
  @include absolute_object_b(0px, 0px, 100%, $armco_height, $layer_3)
  background:
    image: url(#{$texture_armco})
    size: $texture_armco_width $texture_armco_height

/* ---- Forest ----*/
$forest_height: 125px
$texture_forest: $texture_path + "Forest.png"
$texture_forest_height: $forest_height
$texture_forest_width: 250px

#forest
  @include absolute_object_b($height_of_hill, 0px, 100%, $forest_height, $layer_1)
  background:
    image: url(#{$texture_forest})
    size: $texture_forest_width $texture_forest_height

/* ---- Ground ---- */
$texture_ground: $colour_path + "dark_brown.png"

#ground
  width: 100%
  height: $height_of_ground
  position: relative
  background:
    image: url(#{$texture_ground})

  min:
    height: 300px

  z-index: 1

/* ---- Beach ---- */
$texture_beach: $colour_path + "yellow.png"
$texture_beach_size: 100px

#beach
  @include absolute_object(0px, 0px, 100%, $height_of_beach, $layer_3)
  background:
    image: url(#{$texture_beach})
    size: $texture_beach_size $texture_beach_size

/* ---- Sea ---- */
$sea_height: 100%
$texture_sea: $colour_path + "dark_blue.png"
$texture_sea_size: 100px

#sea
  @include absolute_object(0px, 0px, 100%, $sea_height, $layer_2)
  background:
    image: url(#{$texture_sea})
    size: $texture_sea_size $texture_sea_size
  opacity: 0.8

$texture_sea_gradient: $texture_path + "Sea_Gradient.png"
$sea_gradient_width: 600px
$sea_gradient_height: 600px

#sea_gradient
  width: 100%
  height: 100%
  background:
    image: url(#{$texture_sea_gradient})
    size: $sea_gradient_width $sea_gradient_height
  opacity: 1.0

$animation: "image/animation/"
$animation_weather: $animation + "TODOripple.gif"

#tint
  @include absolute_object(0px, 0px, 100%, $sea_height, $layer_3)
  background:
    image: url(#{$animation_weather})
  opacity: 0.2
  pointer-events: none

$texture_fish: $texture_path + "Fish.png"

#fish
  @include absolute_object(200px, 200px, 100px, 33px)
  background:
    image: url(#{$texture_fish})
    size: 100% 100%
    repeat: no-repeat

@mixin countdown($bottom, $left, $z-index)
  @include absolute_object_b($bottom, $left, $countdown_width, $countdown_height, $z-index)
  overflow: hidden

@mixin countdown_cover
  position: relative
  pointer-events: none

@mixin countdown_days($primary, $secondary)
  position: relative
  height: $countdown_height
  width: 100%

  pointer-events: none

  background:
    color: $primary
  color: $secondary

  text:
    align: center
  font:
    size: 40pt
  line:
    height: $countdown_height

.countdown_hide
  @include animate(counterHide, 0.3s, forwards)
  top: 0px !important
  margin-bottom: 0px !important

.countdown_show
  @include animate(counterShow, 0.3s, forwards)
  top: -$countdown_height !important
  margin-bottom: -$countdown_height !important

@include generateKeyframes(counterHide, (top, margin-bottom), ((0px, 0px), (-$countdown_height, -$countdown_height)), false)
@include generateKeyframes(counterShow, (top, margin-bottom), ((-$countdown_height, -$countdown_height), (0px, 0px)), false)

#got
  @include countdown($height_of_hill, 650px, $layer_5)

#got_cover
  @include countdown_cover

#got_days
  @include countdown_days(#6B6B6B, #EFEFEF)