/* ------------------------------------------------------------------- */
/* -------------------------- Control Panel -------------------------- */
/* ------------------------------------------------------------------- */

$texture_path: "image/texture/"
$colour_path: "image/colour/"
$filter_path: "image/filter/"
$prop_path: "image/prop/"
$animation_path: "image/animation/"


/* ------------------------------------------------------------------- */
/* ------------------------------- Util ------------------------------ */
/* ------------------------------------------------------------------- */

$layer_1: 1
$layer_2: 2
$layer_3: 3
$layer_4: 4
$layer_5: 5
$layer_6: 6
$layer_filter: 9
$layer_overlay: 10
$layer_overlay2: 11

/* ---- Positioning ---- */
@mixin absolute_object($top, $left, $width, $height, $z-index: $layer_1)
  position: absolute
  top: $top
  left: $left
  width: $width
  height: $height
  z-index: $z-index

@mixin absolute_object_b($bottom, $left, $width, $height, $z-index: $layer_1)
  position: absolute
  bottom: $bottom
  left: $left
  width: $width
  height: $height
  z-index: $z-index

/* ---- Animation ---- */
@mixin generateKeyframes($animationName, $properties, $points, $back)
  $postfix: ""  
  $timepoints: length($points) - 1
  $increment: 100% / $timepoints
  @if $back
    $postfix: "Open"
  @-webkit-keyframes #{$animationName}#{$postfix}
    @for $j from 1 to length($points) + 1
      #{($j - 1) * $increment}
        @for $i from 1 to length($properties) + 1
          #{nth($properties, $i)}: nth(nth($points, $j), $i)
      
  @keyframes #{$animationName}#{$postfix}
    @for $j from 1 to length($points) + 1
      #{($j - 1) * $increment}
        @for $i from 1 to length($properties) + 1
          #{nth($properties, $i)}: nth(nth($points, $j), $i)

@mixin animate($animationName, $time, $style, $repeat)
  $times: ""
  @if $repeat == forwards
    $times: 1
  -webkit-animation: $animationName $time $style 0s #{$times} $repeat
  animation: $animationName $time $style 0s #{$times} $repeat

/* ---- Center ---- */
.centerer
  position: relative
  margin: 0 auto
  height: 100%

@media (orientation:portrait)
  .centerer
    width: 100vw

@media (orientation:landscape)
  .centerer
    width: 100vh

/* ------------------------------------------------------------------- */
/* ------------------------------- Body ------------------------------ */
/* ------------------------------------------------------------------- */

body
  margin: 0px 0px 0px 0px
  color: #DCDCDC
  background:
    color: black
  font:
    family: helvetica
  

#old_site
  position: absolute
  width: 15vmin
  height: auto
  top: 0%
  right: 2.5%
  padding: 1vmin
  background:
    color: #009999
  font-size: 2vmin
  text-align: center
  text-decoration: none
  z-index: $layer_6
  color: white
  
/* ------------------------------------------------------------------- */
/* ---------------------------- Day/Night ---------------------------- */
/* ------------------------------------------------------------------- */

.noselect
  -webkit-touch-callout: none /* iOS Safari */
  -webkit-user-select: none   /* Chrome/Safari/Opera */
  -khtml-user-select: none    /* Konqueror */
  -moz-user-select: none      /* Firefox */
  -ms-user-select: none       /* Internet Explorer/Edge */
  user-select: none           /* Non-prefixed version, currently not supported by any browser */
  cursor: pointer

$texture_watch_indicator: $prop_path + 'watch_indicator.png'
#watch_indicator
  position: fixed
  z-index: $layer_overlay
  background:
    image: url(#{$texture_watch_indicator})
    size: 100% 100%

@media (orientation:portrait)
  #watch_indicator
    top: 5vw
    left: 5vw
    width: 22.5vw
    height: 22.5vw

@media (orientation:landscape)
  #watch_indicator
    top: 5vh
    left: 5vh
    width: 22.5vh
    height: 22.5vh

$texture_watch: $prop_path + 'watch.png'
#watch
  position: fixed
  z-index: $layer_overlay2
  background:
    image: url(#{$texture_watch})
    size: 100% 100%
  display: flex
  flex-direction: column
  justify-content: center
  align-items: center

@media (orientation:portrait)
  #watch
    top: 5vw
    left: 5vw
    width: 22.5vw
    height: 22.5vw
    font-size: 22.5vw

@media (orientation:landscape)
  #watch
    top: 5vh
    left: 5vh
    width: 22.5vh
    height: 22.5vh
    font-size: 22.5vh

.watch_bar
  width: 63%
  display: flex
  flex-direction: row
  justify-content: center
  align-items: center

#watch_time_bar
  height: 25%

#watch_date_bar
  height: 20%

#watch_name
  height: 20%
  line-height: 100%
  margin: 0 auto
  font-size: 5%

.watch_time_symbol
  width: 15%
  font-size: 5%
  text-align: center

#watch_time
  width: 70%
  text-align: center
  font-family: monospace
  font-size: 15%
  padding-bottom: 2%

#watch_date
  width: 14%
  font-size: 5%
  text-align: center
  margin-bottom: 5%

.mask
  pointer-events: none

.watch_control_symbol
  display: flex
  flex-direction: row
  justify-content: center
  align-items: center
  width: 18%
  height: 58%
  background-color: #444444
  border-radius: 50%
  font-size: 5%
  margin-bottom: 6%

/* ------------------------------------------------------------------- */
/* ----------------------------- Sky/Land ---------------------------- */
/* ------------------------------------------------------------------- */
$sky_height_multiplier: 0.7
$land_height_multiplier: 1 - $sky_height_multiplier

@media (orientation:portrait)
  #sky
    position: relative
    width: 100%
    height: $sky_height_multiplier * 100vw
    background-color: green

@media (orientation:landscape)    
  #sky
    position: relative
    width: 100%
    height: $sky_height_multiplier * 100vh
    background-color: green

$texture_land: $colour_path + "dark_brown.png"

@media (orientation:portrait)
  #land
    position: relative
    width: 100%
    height: $land_height_multiplier * 100vw
    background-image: url(#{$texture_land})

@media (orientation:landscape)    
  #land
    position: relative
    width: 100%
    height: $land_height_multiplier * 100vh
    background-image: url(#{$texture_land})

/* ------------------------------------------------------------------- */
/* ------------------------------- Sky ------------------------------- */
/* ------------------------------------------------------------------- */

#sky_background
  position: absolute
  width: 100%
  height: 100%
  z-index: $layer_1
  overflow: hidden

#sky_foreground
  position: absolute
  width: 100%
  height: 100%
  z-index: $layer_2
  overflow: hidden
  pointer-events: none

#sky_background_black
  position: absolute
  width: 100%
  height: 100%
  z-index: $layer_1
  background-color: black

$texture_sky: $colour_path + "light_blue.png"
$texture_sky_size: 300px
#sky_background_blue
  position: absolute
  width: 100%
  height: 100%
  z-index: $layer_2
  background:
    image: url(#{$texture_sky})
    size: $texture_sky_size $texture_sky_size
  opacity: 1.0

$texture_sky_tint: $filter_path + "tint.png"
$sky_tint_width: 400px
$sky_tint_height: 100%
#sky_background_tint
  position: absolute
  width: 100%
  height: 100%
  background:
    image: url(#{$texture_sky_tint})
    size: $sky_tint_width $sky_tint_height
  opacity: 1.0
  z-index: $layer_3

#sky_mask
  position: absolute
  width: 100%
  height: 100%
  background-color: black
  z-index: $layer_2

#sky_background_center
  z-index: 3

$texture_sun_moon: $prop_path + "sun_moon.png"
#sky_background_sun_moon_static
  position: absolute
  width: 100%
  height: 100%
  z-index: $layer_4

#sky_background_sun_moon_rotating
  position: relative
  width: 100%
  height: 200%
  background:
    image: url(#{$texture_sun_moon})
    position: center
    size: 22% auto
    repeat: no-repeat

#sky_background_clouds
  position: absolute
  width: 100%
  height: 100%
  z-index: $layer_5
  pointer-events: none

#birds
  @include absolute_object_b(20%, 100%, 10%, 10%)

$texture_birds: $animation_path + "bird.gif"
#bird1
  @include absolute_object_b(0%, 30%, 50%, 50%)
  background:
    image: url(#{$texture_birds})
    size: 100% auto
    repeat: no-repeat

#bird2
  @include absolute_object_b(40%, 70%, 30%, 30%)
  background:
    image: url(#{$texture_birds})
    size: 100% auto
    repeat: no-repeat

#bird3
  @include absolute_object_b(30%, 0%, 25%, 25%)
  background:
    image: url(#{$texture_birds})
    size: 100% auto
    repeat: no-repeat

$texture_rocks: $texture_path + "stone.png"
#sky_left
  position: absolute
  bottom: 0px
  left: 0px
  height: 20%
  width: calc((100vw - 100vh) / 2)
  background:
    image: url(#{$texture_rocks})
    size: auto 100%
    position: right 0px bottom 0px
    repeat: repeat-x

#sky_center
  pointer-events: none
  z-index: $layer_3

$texture_trees: $prop_path + "treeline.png"
#sky_right
  position: absolute
  bottom: 0px
  right: 0px
  height: 30%
  background:
    image: url(#{$texture_trees})
    size: auto 100%
    position: left 0px bottom 0px
    repeat: repeat-x

@media (orientation:landscape)
  #sky_right
    width: calc(((100vw - 100vh) / 2) + 50vh)

@media (orientation:portrait)    
  #sky_right
    width: 50vw

/* ------------------------------------------------------------------- */
/* ----------------------------- Clouds ------------------------------ */
/* ------------------------------------------------------------------- */
$texture_cloud: $texture_path + "cloud"

@mixin cloud($id, $top, $left, $time)
  @include absolute_object($top, auto, 15%, 100% - $top, $layer_2)
  @include animate(cloud#{$id}, $time, linear, infinite)
  background:
    image: url(#{$texture_cloud}/Cloud_#{$id}.png)
    size: 100% auto
    repeat: no-repeat

#cloud1
  @include cloud(1, 5%, 5%, 50s)

@include generateKeyframes(cloud1, (right, opacity), ((10%, 0.0), (40%, 1.0), (70%, 1.0), (100%, 0.0)), false)

#cloud2
  @include cloud(2, 40%, 5%, 58s)

@include generateKeyframes(cloud2, (right, opacity), ((10%, 0.0), (10%, 0.0), (40%, 1.0), (70%, 1.0), (100%, 0.0)), false)

#cloud3
  @include cloud(3, 30%, 10%, 66s)

@include generateKeyframes(cloud3, (right, opacity), ((10%, 0.0), (10%, 0.0), (10%, 0.0), (40%, 1.0), (70%, 1.0), (100%, 0.0)), false)

#cloud4
  @include cloud(4, 50%, 2%, 74s)

@include generateKeyframes(cloud4, (right, opacity), ((10%, 0.0), (10%, 0.0), (10%, 0.0), (10%, 0.0), (40%, 1.0), (70%, 1.0), (100%, 0.0)), false)

#cloud5
  @include cloud(5, 15%, 15%, 82s)

@include generateKeyframes(cloud5, (right, opacity), ((10%, 0.0), (10%, 0.0), (10%, 0.0), (10%, 0.0), (10%, 0.0), (40%, 1.0), (70%, 1.0), (100%, 0.0)), false)

#cloud6
  @include cloud(6, 25%, 5%, 90s)

@include generateKeyframes(cloud6, (right, opacity), ((10%, 0.0), (10%, 0.0), (10%, 0.0), (10%, 0.0), (10%, 0.0), (10%, 0.0), (40%, 1.0), (70%, 1.0), (100%, 0.0)), false)


/* ------------------------------------------------------------------- */
/* --------------------------- Foreground ---------------------------- */
/* ------------------------------------------------------------------- */

$lighthouse_width: 25%
$texture_lighthouse: $prop_path + "lighthouse.png"
$texture_lighthouse_mask: $prop_path + "lighthousemask.png"

#lighthouse
  @include absolute_object_b(0px, 10%, $lighthouse_width, 100%, $layer_4)
  background:
    image: url(#{$texture_lighthouse})
    repeat: no-repeat
    position: bottom 0px left 0px
    size: 100% auto

#lighthouse_mask
  @include absolute_object_b(0px, 10%, $lighthouse_width, 100%, $layer_5)
  background:
    image: url(#{$texture_lighthouse_mask})
    repeat: no-repeat
    position: bottom 0px left 0px
    size: 100% auto

/* ---- Exocet ---- */
$exocet_size: 12.5%
$texture_exocet: $animation_path + "exocet.gif"

#exocet_wrapper
  @include absolute_object_b(0px, 0px, $exocet_size, $exocet_size, $layer_3)
  transform: translateX(100%)

#exocet
  position: absolute
  width: 100%
  height: 100%
  transform: scaleX(-1)
  background:
    image: url(#{$texture_exocet})
    size: 100% auto
    repeat: no-repeat
    position: bottom

$stairs_width: 80%
$texture_stairs: $prop_path + "stairs.png"
#stairs
  @include absolute_object(0px, 25%, $stairs_width, 100%)
  background:
    image: url(#{$texture_stairs})
    repeat: no-repeat
    size: auto 100%

/* ------------------------------------------------------------------- */
/* ------------------------------ Land ------------------------------- */
/* ------------------------------------------------------------------- */

#land_mask
  position: absolute
  width: 100%
  height: 100%
  background-color: black
  z-index: $layer_filter

$tarmac_size: 5%
$tarmac_colour: #252525
#tarmac
  position: absolute
  top: 0%
  width: 100%
  height: $tarmac_size
  background-color: $tarmac_colour

$texture_bank: $prop_path + "stones.png"
#stones
  position: absolute
  top: 0px
  width: 100%
  height: 25%
  z-index: 2
  background:
    image: url(#{$texture_bank})
    size: auto 100%
    position: center

$texture_beach: $texture_path + "beach.png"
$texture_beach_size: 100px
#sand
  position: absolute
  top: $tarmac_size
  width: 100%
  height: 35%
  background:
    image: url(#{$texture_beach})
    size: $texture_beach_size $texture_beach_size
  z-index: 1

/* ------------------------------------------------------------------- */
/* ------------------------------ Lake ------------------------------- */
/* ------------------------------------------------------------------- */

$lake_height: 80%
$texture_lake: $colour_path + "dark_blue.png"
$texture_lake_size: 100px

#lake
  position: absolute
  top: 20%
  width: 100%
  height: $lake_height
  background:
    image: url(#{$texture_lake})
    size: $texture_lake_size $texture_lake_size
  opacity: 1.0

$texture_fish: $texture_path + "fish.png"
$fish_top: 35%
#fish
  @include absolute_object($fish_top, 10%, 5%, 100% - $fish_top)
  background:
    image: url(#{$texture_fish})
    size: 100% auto
    repeat: no-repeat

$texture_gradient: $texture_path + "gradient.png"

#lake_tint
  position: absolute
  top: 20%
  width: 100%
  height: $lake_height
  background:
    image: url(#{$texture_gradient})
    size: auto 100%
  opacity: 1.0

/* ---- Sam Esgate ---- */
$samesgate_color: #DCDCDC
$samesgate_border: 1vmin

#samesgate
  position: absolute
  width: 35vmin
  height: auto
  right: 5%
  bottom: 60%
  font:
    family: helvetica
  font-size: 5vmin
  line-height: 7.5vmin
  text-align: center
  border:
    //top: ($samesgate_border / 2) solid $samesgate_color
    bottom: ($samesgate_border / 2) solid $samesgate_color
  color: $samesgate_color
  z-index: $layer_6

#bonzos_useful_things
  position: absolute
  display: flex
  flex-direction: row
  flex-wrap: wrap
  justify-content: center
  align-items: center
  right: 5%
  top: 40%
  background:
    color: #2D2222
  border:
    radius: 0px 0px 5px 5px
  z-index: $layer_6

.useful_icon
  width: 10vmin
  height: 10vmin

$countdown_width: 75px
$countdown_height: 75px

/* ------------------------------------------------------------------- */
/* ------------------------------ Sidebar ---------------------------- */
/* ------------------------------------------------------------------- */
#sidebar
  position: fixed
  right: 0px
  height: 100%
  width: 0px
  background:
    color: white

  z-index: 2
  opacity: 0.5

.sidebar_closed
  @include animate(closeSidebar, 200ms, ease-out, forwards)
  width: 100px !important

.sidebar_open
  @include animate(openSidebar, 200ms, ease-out, forwards)
  width: 0px !important

@include generateKeyframes(closeSidebar, (width), ((100px, 0px)), false)
@include generateKeyframes(openSidebar, (width), ((0px, 100px)), false)

#tab
  position: relative
  width: 50px
  height: 50px
  top: 50px
  left: -50px
  background-color: black
  text-align: center
  color: white
  font-size: 20pt

#tab_icon
  line-height: 50px
    
#sidebar_content
  position: relative
  height: 100%
  width: 100%
  padding: 5px

/* ---- Clock ---- */
$clock_height: 300px
$clock_width: $clock_height / 2
$clock_top: 0px
$clock_left: 0px
$texture_clock: $texture_path + "clock.png"

#clock
  @include absolute_object($clock_top, $clock_left, $clock_width, $clock_height)
  background:
    image: url(#{$texture_clock})
    size: $clock_width $clock_height
  @include animate(clockSwing, 4s, ease-out, infinite)

@include generateKeyframes(clockSwing,(transform, -webkit-transform), ((rotate(-1deg), rotate(-1deg)), (rotate(1deg), rotate(1deg)), (rotate(-1deg), rotate(-1deg))), false)


$animation_weather: $animation_path + "todo_ripple.gif"

/* ---- Armco ---- */
$armco_height: 25px
$texture_armco: $texture_path + "armco.png"
$texture_armco_height: 100%
$texture_armco_width: 425px

$countdown_url: "image/countdown/"

@mixin countdown($top, $left, $z-index)
  @include absolute_object($top, $left, $countdown_width, $countdown_height, $z-index)
  overflow: hidden

@mixin countdown_cover
  position: relative
  pointer-events: none
  width: 100%
  height: $countdown_height

@mixin countdown_days($primary, $secondary)
  position: relative
  height: $countdown_height
  width: 100%

  pointer-events: none

  background:
    color: $primary
  color: $secondary

  text:
    align: center
  font:
    size: 40pt
  line:
    height: $countdown_height

.countdown_hide
  @include animate(counterHide, 0.3s, ease-out,  forwards)
  top: 0px !important
  margin-bottom: 0px !important

.countdown_show
  @include animate(counterShow, 0.3s, ease-out, forwards)
  top: -$countdown_height !important
  margin-bottom: -$countdown_height !important

@include generateKeyframes(counterHide, (top, margin-bottom), ((0px, 0px), (-$countdown_height, -$countdown_height)), false)
@include generateKeyframes(counterShow, (top, margin-bottom), ((-$countdown_height, -$countdown_height), (0px, 0px)), false)

$countdown_got: $countdown_url + "got.jpeg"

#got
  @include countdown(10px, 650px, $layer_2)

#got_cover
  @include countdown_cover
  background:
    image: url(#{$countdown_got})
    size: 100% 100%

#got_days
  @include countdown_days(#6B6B6B, #EFEFEF)

$countdown_got: $countdown_url + "f1.jpeg"

#f1
  @include countdown(10px, 750px, $layer_2)

#f1_cover
  @include countdown_cover
  background:
    image: url(#{$countdown_got})
    size: 100% 100%

#f1_days
  @include countdown_days(#6B6B6B, #EFEFEF)

$countdown_project: $countdown_url + "imperial.jpeg"

#project
  @include countdown(10px, 850px, $layer_2)

#project_cover
  @include countdown_cover
  background:
    image: url(#{$countdown_project})
    size: 100% 100%

#project_days
  @include countdown_days(#6B6B6B, #EFEFEF)